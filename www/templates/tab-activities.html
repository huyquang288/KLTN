<ion-view view-title="Topics">
    <ion-nav-buttons side="right">
        <button class="button button-clear button-icon button-positive icon ion-ios-compose-outline"
                ng-click="openNewChat()"></button>
    </ion-nav-buttons>

    <ion-content>
        <ion-list ng-if="recentTopics.length>0 || bookmarkTopics.length>0">
            <ion-item>
                <button class="button button-small button-block icon-left ion-ios-search" 
                        ng-click="openSearch()"
                        style="margin: 0">
                    Search for people and topics
                </button>
            </ion-item>
            <h4 ng-if="recentTopics.length>0"><b>Recent</b></h4>
            <span ng-repeat="topic in recentTopics track by $index">
                <ion-item class="item-remove-animate item-avatar" 
                          nav-direction="forward" href="#/topic/{{topic.id}}"
                          type="item-text-wrap">
                    <img ng-src="{{topic.thumbnail}}">

                    <!-- <span class="badge avatar-badge avatar-badge-s"
                          ng-class="{'badge-positive':room.roomType=='ms_friend', 'badge-stable':room.rooms.roomType=='fb_friend'}"
                          ng-if="room.roomType!='group'">
                        <i class="icon ion-ios-bolt" ng-if="room.roomType=='ms_friend'"></i>
                        <i class="icon ion-social-facebook light" 
                           ng-if="topic.roomType=='fb_friend'">
                        </i>
                    </span> -->

                    <h3>
                        <small>{{topic.title}}</small>
                    </h3>

                    <p>{{getLastMessageText(topic.id)}}</p>

                    <span class="item-note">
                        {{getLastMessageTime(topic.id)}}
                    </span>

                    <ion-option-button class="button-assertive" ng-click="">
                        Unfollow
                    </ion-option-button>
                </ion-item>
            </span>
            <h4 ng-if="bookmarkTopics.length>0">
                <p style='text-align:center'>
                    <b class="button-icon icon ion-ios-bookmarks-outline"></b>
                </p>
            </h4>
            <span ng-repeat="topic in bookmarkTopics track by $index">
                <ion-item class="item-remove-animate item-avatar" 
                          nav-direction="forward" href="#/topic/{{topic.id}}"
                          type="item-text-wrap">
                    <img ng-src="{{topic.thumbnail}}">

                    <!-- <span class="badge avatar-badge avatar-badge-s"
                          ng-class="{'badge-positive':room.roomType=='ms_friend', 'badge-stable':room.rooms.roomType=='fb_friend'}"
                          ng-if="room.roomType!='group'">
                        <i class="icon ion-ios-bolt" ng-if="room.roomType=='ms_friend'"></i>
                        <i class="icon ion-social-facebook light" 
                           ng-if="topic.roomType=='fb_friend'">
                        </i>
                    </span> -->
                 
                    <h3>
                        <small>{{topic.title}}</small>
                    </h3>

                    <p>{{getLastMessageText(topic.id)}}</p>

                    <span class="item-note">
                        {{getLastMessageTime(topic.id)}}
                    </span>

                    <ion-option-button class="button-dark" ng-click="">
                        Unbookmark
                    </ion-option-button>
                </ion-item>
            </span>
        </ion-list>

        <!--show when there is no activity-->
        <div ng-if="recentTopics.length<=0 && bookmarkTopics.length<=0">
            <div style="height: 60px"></div>
            <div class="text-center" style="padding: 45px">
                <h2 class="grey">
                    Recent & Bookmark
                </h2>

                <div style="height: 10px"></div>
                <h4 class="grey">Once you start chatting, all your messages will be here.</h4>

                <div style="height: 20px"></div>
                <button class="button button-outline" ng-click="openNewChat()">New Message</button>
            </div>
        </div>
    </ion-content>
</ion-view>