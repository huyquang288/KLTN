<style>
    .plus-circle {
        display: inline-block;

        width: 60px;
        height: 60px;
        border-radius: 30px;
        border: 2px dashed #D9D9D9;
        padding: 7px;
    }

    .plus-circle i {
        font-size: 40px;
    }

    .fileUpload {
        position: relative;
    }

    .fileUpload input.upload {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        padding: 0;
        cursor: pointer;
        opacity: 0;
    }

    .fileUpload .icon {
        font-size: 24px;
        color: #cccccc;
        border: 1px solid #cccccc;
        border-radius: 50%;
        padding: 8px 13px;

        position: relative;
        top: 12px;
    }

    /*.item h3 small {*/
        /*overflow: hidden;*/
        /*text-overflow: ellipsis;*/
        /*white-space: nowrap;*/
    /*}*/
</style>

<ion-view>

    <ion-nav-buttons side="left">
        <button nav-direction="back" class="button button-clear button-icon button-positive icon ion-ios-arrow-back"
                ng-click="historyBack()">
        </button>
    </ion-nav-buttons>

    <ion-nav-title>
        <a>
            Topics in {{group.name}}
        </a>
    </ion-nav-title>

    <ion-content>

        <ion-list ng-if="rooms.length>0">
            <span ng-repeat="room in rooms">
                <ion-item class="item-remove-animate item-avatar" 
                          nav-direction="forward" href="#/room/{{room.roomId}}"
                          type="item-text-wrap">
                    <img ng-src="{{room.thumbnail}}">

                    <span class="badge avatar-badge avatar-badge-s"
                          ng-class="{'badge-positive':room.roomType=='ms_friend', 'badge-stable':room.roomType=='fb_friend'}"
                          ng-if="room.roomType!='group'">
                        <i class="icon ion-ios-bolt" ng-if="room.roomType=='ms_friend'"></i>
                        <i class="icon ion-social-facebook light" 
                           ng-if="room.roomType=='fb_friend'">
                        </i>
                    </span>

                    <h3>
                        <small>{{room.title}}</small>
                    </h3>

                    <p>{{getLastMessageText(room.roomId)}}</p>

                    <span class="item-note">{{getLastMessageTime(room.roomId)}}</span>

                    <ion-option-button class="button-dark" ng-click="">
                        Leave group
                    </ion-option-button>

                    <ion-option-button class="button-assertive" ng-click="remove(room)">
                        Delete
                    </ion-option-button>

                </ion-item>
            </span>
        </ion-list>

        <!--show when there is no room and you are admin of this group-->
        <div ng-if="rooms.length<1">
            <div class="text-center" style="padding: 50px">
                <h2 class="grey">
                    Topic
                </h2>
                <div style="height: 10px"></div>
                <h4 class="grey">All your group's topics will be here.</h4>
            </div>
        </div>

        <!-- nếu là admin đoạn phía dưới sẽ được hiển thị. -->
        <div ng-if= "isAdmin==true" class="row">
            <div class="col text-center">
                <div class="list card">
                    <div class="item" style="padding: 20px 15px">
                        <h2 class="positive">
                            <small>New Public Topic</small>
                        </h2>
                        <div style="height: 20px"></div>

                        <!-- <a class="plus-circle" ng-click="openNewTopic()">
                            <i class="icon ion-ios-plus-empty stable"></i>
                        </a> -->
                        <div class="fileUpload">
                            <i class="icon ion-camera"></i>
                            <input class="upload" type="file" accept="image/*" capture="camera">
                        </div>

                        <div style="height: 30px"></div>
                        
                        <p class="stable">public</p>
                        <div>
                            <input type="text" ng-model="$root.newPublicTopicName" 
                                   placeholder="Name new topic"
                                   style="height: 57px; text-align:center; width: 100%">
                        </div>
                        <div class="padding">
                            <a class="button button-clear button-positive" 
                               ng-click="createNewTopic('Public', $root.newPublicTopicName, '', group.groupId);">
                                OK
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col text-center">
                <div class="list card">
                    <div class="item" style="padding: 20px 15px">
                        <h2 class="positive">
                            <small>New Private Topic</small>
                        </h2>
                        <div style="height: 20px"></div>

                        <!-- <a class="plus-circle" ng-click="openNewTopic()">
                            <i class="icon ion-ios-plus-empty stable"></i>
                        </a> -->
                        <div class="fileUpload">
                            <i class="icon ion-camera"></i>
                            <input class="upload" type="file" accept="image/*" capture="camera">
                        </div>

                        <div style="height: 30px"></div>
                        
                        <p class="stable">private</p>
                        <div>
                            <input type="text" ng-model="$root.newPrivateTopicName" 
                                   placeholder="Name new topic"
                                   style="height: 57px; text-align:center; width: 100%">
                        </div>
                        <div class="padding">
                            <a class="button button-clear button-positive" 
                               ng-click="createNewTopic('Private', $root.newPrivateTopicName, '', group.groupId);">
                                OK
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>
